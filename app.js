(()=>{"use strict";var t={91:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},606:(t,e,n)=>{t.exports=n.p+"img/3a24d1c2d9b22774331d.ico"}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{var t=n(91),e=n.n(t),a=new URL(n(606),n.b);function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}e()(a);var c=function(){function t(e){i(this,t),this.container=null,this.newButton=null,this.newClickListeners=[],this.tasksTable=null,this.storage=window.localStorage}return l(t,[{key:"bindToDOM",value:function(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}},{key:"drawUi",value:function(){var t=this;this.checkBinding(),this.container.innerHTML='\n      <header class="editor-header">\n        <h2>Задачи</h2>\n        <button data-id="action-add" class="btn"><i class="fas fa-plus"></i></button>\n      </header>\n      <div class="list-editor-container">\n        <table data-id="list-editor" class="list-editor">\n          <thead>\n            <th>Название</th>\n            <th>Стоимость</th>\n            <th>Действия</th>\n          </thead>\n          <tbody>\n            <tr id="empty-row"><td colspan="3">Задач не найдено</td></tr>\n          </tbody>\n        </table>\n      </div>\n    ',this.newButton=this.container.querySelector('[data-id="action-add"]'),this.newButton.addEventListener("click",(function(e){return t.onNewClick(e)})),this.tasksTable=document.querySelector('[data-id="list-editor"]')}},{key:"loadFromLocalStorage",value:function(){var t=this;null!==this.storage.getItem("rows")&&JSON.parse(this.storage.getItem("rows")).forEach((function(e){t.addLi(e.name,e.price,e.id)}))}},{key:"checkBinding",value:function(){if(null===this.container)throw new Error("Element not bind to DOM")}},{key:"openModal",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElement("div");r.classList.add("modal"),r.classList.add("show"),r.innerHTML='\n    <div class="modal--inner">\n      <form>\n        <div class="form-group">\n          <label for="inputName" class="form-label">Название</label>\n          <input value="'.concat(e,'" data-id="inputName" type="text" class="form-control" id="inputName" aria-describedby="inputName">\n        </div>\n        <div class="form-group">\n          <label for="inputPrice" class="form-label">Стоимость</label>\n          <input value="').concat(n,'" data-id="inputPrice" type="number" class="form-control" id="inputPrice">\n        </div>\n        <div class="form-group d-flex">\n          <button type="button" data-id="saveButton" class="btn btn-primary">Сохранить</button>\n          <button type="button" data-id="cancelButton" class="btn btn-primary">Отмена</button>\n        </div>  \n      </form>\n  </div>\n    '),r.querySelector('[data-id="saveButton"]').addEventListener("click",(function(e){return t.saveForm(e,a)})),r.querySelector('[data-id="cancelButton"]').addEventListener("click",(function(){return t.closeModal()})),document.querySelector("body").appendChild(r)}},{key:"saveForm",value:function(t,e){t.preventDefault();var n=document.querySelector('[data-id="inputName"'),a=document.querySelector('[data-id="inputPrice"');n.classList.remove("invalid"),a.classList.remove("invalid"),n.value&&a.value?(e?this.updateLi(e,n.value,a.value):this.addLi(n.value,a.value),this.closeModal()):n.value?a.value||a.classList.add("invalid"):n.classList.add("invalid")}},{key:"addLi",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.tasksTable.querySelector("#empty-row")&&this.tasksTable.querySelector("#empty-row").remove();var r=document.createElement("tr");r.dataset.rowId="row".concat(a||this.getRandomInt()),r.innerHTML='\n        <td data-id="tableName">'.concat(t,'</td>\n        <td data-id="tablePrice">').concat(e,'</td>\n        <td>\n          <button type="button" data-id="buttonEdit"><i class="fas fa-pencil-alt"></i></button>\n          <button type="button" data-id="buttonDelete"><i class="fas fa-times"></i></button>\n        </td>\n        '),this.tasksTable.querySelector("tbody").appendChild(r),r.querySelector('[data-id="buttonEdit"]').addEventListener("click",(function(){return n.editTask(r.dataset.rowId)})),r.querySelector('[data-id="buttonDelete"]').addEventListener("click",(function(){return n.deleteTask(r.dataset.rowId)})),a||this.saveToLocalStorage()}},{key:"updateLi",value:function(t,e,n){var a=this.tasksTable.querySelector('[data-row-id="'.concat(t,'"]'));a.querySelector('[data-id="tableName"]').innerHTML=e,a.querySelector('[data-id="tablePrice"]').innerHTML=n,this.saveToLocalStorage()}},{key:"editTask",value:function(t){var e=this.tasksTable.querySelector('[data-row-id="'.concat(t,'"]')),n=e.querySelector('[data-id="tableName"]').innerHTML,a=e.querySelector('[data-id="tablePrice"]').innerHTML;this.openModal(n,a,t)}},{key:"deleteTask",value:function(t){this.tasksTable.querySelector('[data-row-id="'.concat(t,'"]')).remove(),this.saveToLocalStorage()}},{key:"closeModal",value:function(){document.querySelector(".modal").remove()}},{key:"saveToLocalStorage",value:function(){var t,e=(t=this.tasksTable.querySelectorAll("tbody tr"),function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return{id:t.dataset.rowId,name:t.querySelector('[data-id="tableName"]').innerHTML,price:t.querySelector('[data-id="tablePrice"]').innerHTML}}));this.storage.setItem("rows",JSON.stringify(e))}},{key:"addNewClickListener",value:function(t){this.newClickListeners.push(t)}},{key:"onNewClick",value:function(t){this.newClickListeners.forEach((function(e){return e.call(null,t)}))}},{key:"getRandomInt",value:function(){return Math.floor(1e3+99999*Math.random())}}]),t}(),s=function(){function t(e){i(this,t),this.listEditor=e}return l(t,[{key:"init",value:function(){this.listEditor.drawUi(),this.listEditor.loadFromLocalStorage(),this.listEditor.addNewClickListener(this.onNewClick.bind(this))}},{key:"onNewClick",value:function(t){this.listEditor.openModal()}}]),t}(),d=new c;d.bindToDOM(document.querySelector("#list-editor")),new s(d).init()})()})();
//# sourceMappingURL=app.js.map